name: sql-check

on:
  push:
  pull_request:

jobs:
  sql-files:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Verify SQL files exist
        run: |
          test -f sql/001_init_core.sql
          test -f sql/002_indexes.sql
          test -f sql/003_outbox_and_queue.sql
          test -f sql/004_permissions_and_risk.sql
          test -f sql/005_position_close_lock.sql
          test -f sql/006_position_orders_command_id.sql
          test -f sql/007_position_positions_updated_at.sql
          test -f sql/008_position_deals_unique_exchange_trade.sql
          test -f sql/009_accounts_is_testnet.sql
